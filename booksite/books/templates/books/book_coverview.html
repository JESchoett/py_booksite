{% extends "base.html" %}
{% block title %}Bücher Übersicht{% endblock %}

{% block content %}

<div class="row">
    <a href="{{ url_for('books.index') }}" class="btn btn-secondary" id="back">Tableview</a>
</div>

<h1>Bücher Übersicht</h1>

    <div class="table-responsive custom-table">
        <table id="bookTable" class="table table-striped table-hover table-borderless" style="width:100%">
            <thead>
                <tr>
                    <th>Bücher</th>
                    <th class="d-none">#</th>
                    <th class="d-none">Titel</th>
                    <th class="d-none">Subtitel</th>
                    <th class="d-none">Autor</th>
                    <th class="d-none">Genre</th>
                    <th class="d-none">Schlagwörter</th>
                    <th class="d-none">Verlag</th>
                    <th class="d-none">Jahr</th>
                    <th class="d-none">Format</th>
                    <th class="d-none">Standort</th>
                </tr>
            </thead>
            <tbody>
                {% for book in all_books %}
                    {% set cover_filename = "defaultCover.png" %}
                    {% if book.bild %}
                        {% set cover_filename = book.bild %}
                    {% endif %}
                <tr>
                    <td class="">
                        <a href="{{ url_for('books.book_details', nummer=book['nummer']) }}">
                            <img id="coverview" src="{{ url_for('static', filename='cover/' ~ cover_filename) }}" alt="Book Image" class="img-fluid mb-2">
                        </a>
                    </td>
                    <td class="d-none table-nr"> <a href="{{ url_for('books.book_details', nummer=book['nummer']) }}">{{ book['nummer']}}</a></td>
                    <td class="d-none"> <a href="{{ url_for('books.book_details', nummer=book['nummer']) }}">{{ book['titel'] }}</a></td>
                    <td class="d-none">{{ book['subtitel'] }}</td>
                    <td class="d-none">{{ book['autor'] }}</td>
                    <td class="d-none">{{ book['genre'] }}</td>
                    <td class="d-none">{{ book['schlagw'] }}</td>
                    <td class="d-none">{{ book['verlag'] }}</td>
                    <td class="d-none">{{ book['jahr'] }}</td>
                    <td class="d-none">{{ book['format'] }}</td>
                    <td class="d-none">{{ book['standort'] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    console.log("DataTable initialized");
    new DataTable('#bookTable', {
        language: {
            lengthMenu: "Einträge pro Seite:&nbsp;&nbsp; _MENU_",
            zeroRecords: "Keine passenden Einträge gefunden",
            info: "Zeige _START_ bis _END_ von _TOTAL_ Einträgen",
            infoEmpty: "Keine verfügbaren Einträge",
            infoFiltered: "(gefiltert von insgesamt _MAX_ Einträgen)",
            search: "Suchen:",
            paginate: {
                first: "Erste",
                last: "Letzte",
                next: "Nächste",
                previous: "Vorherige"
            }
        }
    });
});

</script>
{% endblock %}
